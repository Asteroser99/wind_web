<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./img/logo.png" type="image/x-icon">
    <title>Filament winding</title>

    <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@v0.163.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@v0.163.0/examples/jsm/"
          }
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script type="module" src="./window.js"></script>
    <link rel="stylesheet" href="./window.css">

    <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js/dist/amazon-cognito-identity.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="./cognito.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script type="module" src="./chart.js"></script>

    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
<!-- 
MeshLine
<script src="https://unpkg.com/three@0.132.2/build/three.min.js"></script>
<script src="https://unpkg.com/three.meshline@1.4.0/THREE.MeshLine.min.js"></script>
-->
    <script type="module" src="./three.js"></script>
    <link rel="stylesheet" href="./three.css">

    <script type="module" src="./patterns.js"></script>

    <script type="module" src="./vessel.js"></script>

    <script type="module" src="./animate.js"></script>

</head>
<body>
    <div class="header">
        <div class="logo">
            <img id="logo" src="./img/logo.gif" alt="Logo">
        </div>
        <div class="title"><h1>Filament winding</h1></div>
        <div class="buttons">
            <div id="user-info">
                <p id="user-logged" class="user-logged">You are not logged in</p>
                <p id="user-email" class="user-logged"></p>
              </div>

            <button id="logIn"  class="header-btn">Login</button>
            <button id="logOff" class="header-btn">Logoff</button>
        </div>
    </div>

    <div class="main-container">
        <div class="tab-container">
            <div class="tabs">
                <button id="button-vessel"   class="tab-link active" onclick="openTab('vessel'  )">Vessel</button>
                <button id="button-mandrel"  class="tab-link"        onclick="openTab('mandrel' )">Mandrel</button>
                <button id="button-coil"     class="tab-link"        onclick="openTab('coil'    )">Coil</button>
                <button id="button-patterns" class="tab-link"        onclick="openTab('patterns')">Patterns</button>
                <button id="button-winding"  class="tab-link"        onclick="openTab('winding' )">Winding</button>
                <button id="button-info"     class="tab-link"        onclick="openTab('info'    )">Info</button>
            </div>

            <div id="tabs-content" class="tabs-content active">

                <!-- Vessel -->
                <div id="tab-vessel" class="tab-content">
                    <div id="actions-vessel">
                        <h3>Examples</h3>
                        <button id="vesselExample1" class="image-button" title="Load Example 1"><img src="./img/load.png">&nbsp;Example 1</button><br>
                        <button id="vesselExample2" class="image-button" title="Load Example 2"><img src="./img/load.png">&nbsp;Example 2</button><br>
                        <!-- <button id="test" class="image-button" title="test">test</button> -->
                    </div>

                    <div id="file-vessel">
                        <button id="vesselSave" class="image-button" title="Save session">Save session&nbsp;<img src="./img/save.png"></button><br>

                        <button id="vesselLoad" class="image-button" title="Load session">Load session&nbsp;<img src="./img/load.png"></button><br>
                        <input id="vesselLoadInput" type="file" accept=".yaml" style="display: none;" />

                        <button id="vesselClear" class="image-button" title="Clear session">Clear session&nbsp;<img src="./img/clear.png"></button>
                    </div>
                </div>

                <!-- Mandrel -->
                <div id="tab-mandrel" class="tab-content">
                    <div id="actions-mandrel" style="background: rgba(256, 256, 256, 0.9);">
                        <h3>Transformation</h3>
                        <button id="mandrelReverse" class="image-button" title="Reverse"><img src="./img/transform.png">&nbsp;Reverse</button><br>
                        <button id="mandrelMirror" class="image-button" title="Mirror"><img src="./img/transform.png">&nbsp;Mirror</button><br>
                        <button id="mandrelSwap" class="image-button" title="Swap"><img src="./img/transform.png">&nbsp;Swap</button><br>
                        <button id="mandrelRedirect" class="image-button" title="Redirect"><img src="./img/transform.png">&nbsp;Redirect</button><br>
                        
                        <h3>Smoothing</h3>
                        <button id="mandrelSmooth" class="image-button" title="Smooth raw mandrel"><img src="./img/calc.png">&nbsp;Smooth</button><br>
                    </div>

                    <div id="file-mandrel" style="background: rgba(256, 256, 256, 0.9);">
                        <h2>CSV</h2>
                        <h3>Import/Export</h3>
                        <br>

                        <div>
                            <label for="csv-column" value="1">Column:</label>
                            <input type="number" id="csv-column" style="text-align: right; width: 30px">
                            <br>

                            <button id="mandrelImportCSV" class="image-button" title="Raw mandrel import">Import&nbsp;<img src="./img/load.png"></button>
                            <input id="mandrelImportCSVInput" type="file" accept=".csv" style="display: none;" />
                            <br>

                            <button id="mandrelExportCSV" class="image-button" title="Raw mandrel export">Raw&nbsp;<img src="./img/save.png"></button>
                            <br>
                            <button id="mandrelExportCSVSmoothed" class="image-button" title="Smoothed mandrel export">Smoothed&nbsp;<img src="./img/save.png"></button>
                        </div>
    
                    </div>
                </div>

                <!-- Coil -->
                <div id="tab-coil" class="tab-content">
                    <div id="actions-coil">
                        <h3>Coil</h3>
                        <label for="poleInput">Pole:</label>
                        <input type="number" id="poleInput" 
                            min="0" max="999" step="0.001" 
                            value="10.000" pattern="\d{1,3}(\.\d{1,3})?" 
                            title="Enter number 0.000 - 999.999"
                            style="text-align: right;">
                        <br>

                        <button id="coilCalc" class="image-button" title="Generate coil"><img src="./img/calc.png">&nbsp;Generate coil</button><br>
                    </div>

                    <div id="file-coil">
                        <button id="coilLoad" class="image-button" title="Load coil from yaml file">Load coil&nbsp;<img src="./img/load.png"></button>
                        <input id="coilLoadInput" type="file" accept=".yaml" style="display: none;" />
                    </div>
                </div>

                <!-- Patterns -->
                <div id="tab-patterns" class="tab-content">
                    <!-- <button id="patternsCalc" class="action-button">Get patterns</button> -->
                    <table id="data-table">
                        <thead>
                            <tr>
                                <th>Turns</th>
                                <th>Coils</th>
                                <th>Corr. %</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                    <div id="actions-patterns">
                        <button id="coilCorrect" class="image-button" title="Correct coil"><img src="./img/calc.png">&nbsp;Correct coil</button><br>
                    </div>
                </div>

                <!-- Winding -->
                <div id="tab-winding" class="tab-content">
                    <div id="actions-winding">
                        <button id="equidDraw" class="image-button" title="Wind"><img src="./img/calc.png">&nbsp;Wind</button>
                    </div>
                </div>

                <!-- Info -->
                <div id="tab-info" class="tab-content">
                    <h2>Info</h2>
                    <p>This is the info</p>
                </div>

            </div>
        </div>

        <div id="canvas-container">

            <div id="mandrel-canvas-div" class="static-content">
                <canvas id="mandrel-canvas"></canvas>
            </div>

            <div id="patterns-canvas-div" class="static-content">
                <canvas id="patterns-canvas"></canvas>
            </div>

            <div id="scene-canvas-div" class="static-content active">
                <div>
                    <div class="animateControls">
                        <div class="modebar">
                            <button class="mode-button active" data-mode="first">First coil</button>
                            <button class="mode-button" data-mode="round">First round</button>
                            <button class="mode-button" data-mode="all">Full winding</button>
                        </div>
                        <div class="player-bar">
                            <button id="animateButton" class="toggle-button"></button>
                            <input type="range" id="animateSlider" min="0" max="100" step="1" value="0">
                        </div>
                    </div>
                </div>
                <canvas id="scene-canvas"></canvas>
            </div>

            <div id="info-canvas-div" class="static-content">
                <main>
                    <section>
                        <h2>Mandrel Design and Customization</h2>
                        <p>Our platform enables the precise design and customization of mandrels to suit a variety of coil winding requirements. Whether you are working with simple or complex geometries, we provide tools to create mandrels tailored to your specific needs, ensuring durability and compatibility with your equipment.</p>
                    </section>
                    <section>
                        <h2>Efficient Coil Generation</h2>
                        <p>Streamline your coil winding process with our advanced coil generation tools. Define parameters such as wire gauge, turns, and spacing to generate optimal coil designs. Our algorithms ensure accurate layouts for consistent performance across applications, from transformers to motors.</p>
                    </section>
                    <section>
                        <h2>CNC Program Generation</h2>
                        <p>Automate your CNC workflow with our program generation feature. Based on your mandrel and coil design, the system generates ready-to-use CNC code compatible with a wide range of machines. Reduce setup time and achieve precise results with minimal manual adjustments.</p>
                    </section>
                    <section>
                        <h2>Integrated Workflow for Maximum Productivity</h2>
                        <p>Our solution brings together mandrel design, coil generation, and CNC programming into a seamless workflow. By integrating all stages of the process, we help you reduce errors, save time, and achieve high-quality outputs, making it an ideal choice for industries demanding precision and efficiency.</p>
                    </section>
                </main>
            </div>
    
            <div id="actions-container">
            </div>
    
            <div id="file-container">
            </div>
    
            <div id="scene-thumbnail-container">
                <canvas id="scene-thumbnail"></canvas>
            </div>
    
        </div>


        <!-- <div id="numbers">
            <p>Numeric Values</p>
            <p>X: <span id="value-x">0</span></p>
            <p>Y: <span id="value-y">0</span></p>
            <p>Z: <span id="value-z">0</span></p>
    
            <button id="edit-button">Edit Values</button>
    
            <div class="modal-overlay" id="modal-overlay"></div>
        
            <div class="modal" id="edit-modal">
                <h2>Edit Values</h2>
                <label for="input-x">X:</label>
                <input type="number" id="input-x">
                <label for="input-y">Y:</label>
                <input type="number" id="input-y">
                <label for="input-z">Z:</label>
                <input type="number" id="input-z">
                <button id="save-button">Save</button>
                <button id="cancel-button">Cancel</button>
            </div>

        </div> -->

    </div>
</body>
</html>
